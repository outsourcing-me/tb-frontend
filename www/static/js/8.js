webpackJsonp([8],{"4JGu":function(n,e,t){"use strict";t.d(e,"a",function(){return A});var o=t("Dd8w"),i=t.n(o),a=t("Xxa5"),r=t.n(a),s=t("exGp"),c=t.n(s),l=t("oiih"),u=t("NYxO"),d=t("3dbI"),p=t("M4fF"),g=(t.n(p),[{name:"农业",icon:"nongye"},{name:"中国银行",icon:"zhongguo"},{name:"兴业",icon:"nongye"},{name:"工商",icon:"gongshang"},{name:"建设",icon:"jianshe"},{name:"交通",icon:"jiaotong"},{name:"北京",icon:"beijing"},{name:"民生银行",icon:"minsheng"},{name:"光大",icon:"guangda"},{name:"上海",icon:"shanghai"},{name:"中信",icon:"zhongxin"},{name:"浙商",icon:"zheshang"},{name:"邮政",icon:"youzhengchuxu"},{name:"华夏",icon:"huaxia"},{name:"渤海",icon:"bohai"},{name:"平安",icon:"pingan"},{name:"恒丰",icon:"hengfeng"},{name:"浦发",icon:"pufa"},{name:"招商",icon:"zhaoshang"},{name:"广发",icon:"guangfa"}]),A={methods:{getBankIcon:function(n){var e=t.i(p.find)(g,function(e){return~n.indexOf(e.name)});return(e?e.icon:"")+"yinhang"},showSupportBanks:function(){var n=this;return c()(r.a.mark(function e(){var t,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.$store.getters.supportBankCards,!t.length){e.next=5;break}n.$msgBox("支持银行列表：",t.join("、")),e.next=10;break;case 5:return e.next=7,d.e.get().then(function(n){return n.json()});case 7:o=e.sent,n.$store.commit("updateSupportBankCards",o.data),n.$msgBox("支持银行列表：",o.data.join("、"));case 10:case"end":return e.stop()}},e,n)}))()}}};e.b={methods:i()({},t.i(u.a)(["getMsgCode"]),A.methods,{getBank:function(){var n=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.validation.isPassed("model.bankCard")&&setTimeout(c()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.f.get({cardNo:n.model.bankCard}).then(function(n){return n.json()});case 2:t=e.sent,t.code===l.a.OK?(n.model.bankName=t.data.bankName,n.model.bankCode=t.data.bankCode):(n.model.bankName="自动匹配",n.model.bankCode=""),n.bankCardNotSupported=t.code===l.a.BANK_CARD_NOT_SUPPORTED,n.$validate("model.bankCard");case 6:case"end":return e.stop()}},e,n)})),100);case 1:case"end":return e.stop()}},e,n)}))()},toGetMsgCode:function(){var n=this;return c()(r.a.mark(function e(){var o,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$validate(n.validatePhoneModel);case 2:if(!(o=e.sent)){e.next=10;break}return e.next=6,n.getMsgCode({phone:t.i(p.get)(n,n.validatePhoneModel),label:n.$route.meta.captchaSendType||""});case 6:i=e.sent,i.code===l.a.OK&&(n.countdownVisible=!0,n.$refs.fnCountdown.start()),e.next=11;break;case 10:n.$toast(n.validation.firstError(n.validatePhoneModel),"error");case 11:case"end":return e.stop()}},e,n)}))()},onCountdownOver:function(){this.countdownVisible=!1}}),watch:{bankCardForShow:function(){this.model.bankCard=this.bankCardForShow=this.bankCardForShow.replace(/\s/g,""),this.bankCardForShow=this.bankCardForShow.replace(/\d{4}(?=(\d{1,4}))/g,"$& ")},"model.bankCard":function(){this.bankCardNotSupported=!1}},data:function(){return{bankCardForShow:"",bankCardNotSupported:!1,validatePhoneModel:"user.phone",countdownVisible:!1}}}},FTgb:function(n,e,t){t("IbnO");var o=t("VU/8")(t("zx+b"),t("QEuU"),null,null);o.options.__file="/Users/luxueyan/mine/github/tbj-frontend/src/views/common/Login.vue",o.esModule&&Object.keys(o.esModule).some(function(n){return"default"!==n&&"__esModule"!==n})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] Login.vue: functional components are not supported with templates, they should use render functions."),n.exports=o.exports},IbnO:function(n,e,t){var o=t("JBNc");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);t("rjj0")("73f5bd22",o,!1)},JBNc:function(n,e,t){e=n.exports=t("FZ+f")(),e.push([n.i,".login input::-moz-placeholder{font-size:17px!important}.login input:-ms-input-placeholder{font-size:17px!important}.login input::-webkit-input-placeholder{font-size:17px!important}.login .mint-cell-title{width:30px!important}.login .mint-cell-title .iconfont{color:#c0cad8;font-size:20px}.login .mint-cell{min-height:60px}.login .mint-cell:first-child .mint-cell-wrapper{background-image:none}.login .mint-cell:last-child{background-image:linear-gradient(0deg,#d9d9d9,#d9d9d9 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:bottom}.login .mint-button{height:50px;font-size:17px}.login .mint-field-core{font-size:17px}.login .mint-field-other .mint-button{height:35px;width:85px;margin-left:3px;font-size:12px}.login .form-buttons{padding:10px 0}.login .login-form{padding:37px 25px 0}.login .mint-cell-wrapper{padding:0;font-size:17px}.login .form-buttons{margin-top:37px}.login .note-line{color:#666;font-size:14px;padding:20px 0}.login .logo{background:#fff;text-align:center;padding:10px}.login .logo img{max-width:50%;max-width:30vh}.login .logo small{display:block}","",{version:3,sources:["/Users/luxueyan/mine/github/tbj-frontend/src/views/common/Login.vue"],names:[],mappings:"AACA,+BACE,wBAA2B,CAC5B,AACD,mCACE,wBAA2B,CAC5B,AACD,wCACE,wBAA2B,CAC5B,AACD,wBACE,oBAAuB,CACxB,AACD,kCACI,cAAe,AACf,cAAgB,CACnB,AACD,kBACE,eAAiB,CAClB,AACD,iDACI,qBAAuB,CAC1B,AACD,6BACI,yEAA+E,AAC/E,yBAA0B,AAC1B,4BAA6B,AAC7B,0BAA4B,CAC/B,AACD,oBACE,YAAa,AACb,cAAgB,CACjB,AACD,wBACE,cAAgB,CACjB,AACD,sCACE,YAAa,AACb,WAAY,AACZ,gBAAiB,AACjB,cAAgB,CACjB,AACD,qBACE,cAAgB,CACjB,AACD,mBACE,mBAAqB,CACtB,AACD,0BACE,UAAW,AACX,cAAgB,CACjB,AACD,qBACE,eAAiB,CAClB,AACD,kBACE,WAAY,AACZ,eAAgB,AAChB,cAAgB,CACjB,AACD,aACE,gBAAkB,AAClB,kBAAmB,AACnB,YAAc,CACf,AACD,iBACI,cAAe,AACf,cAAgB,CACnB,AACD,mBACI,aAAe,CAClB",file:"Login.vue",sourcesContent:["\n.login input::-moz-placeholder {\n  font-size: 17px !important;\n}\n.login input:-ms-input-placeholder {\n  font-size: 17px !important;\n}\n.login input::-webkit-input-placeholder {\n  font-size: 17px !important;\n}\n.login .mint-cell-title {\n  width: 30px !important;\n}\n.login .mint-cell-title .iconfont {\n    color: #c0cad8;\n    font-size: 20px;\n}\n.login .mint-cell {\n  min-height: 60px;\n}\n.login .mint-cell:first-child .mint-cell-wrapper {\n    background-image: none;\n}\n.login .mint-cell:last-child {\n    background-image: linear-gradient(0deg, #d9d9d9, #d9d9d9 50%, transparent 50%);\n    background-size: 100% 1px;\n    background-repeat: no-repeat;\n    background-position: bottom;\n}\n.login .mint-button {\n  height: 50px;\n  font-size: 17px;\n}\n.login .mint-field-core {\n  font-size: 17px;\n}\n.login .mint-field-other .mint-button {\n  height: 35px;\n  width: 85px;\n  margin-left: 3px;\n  font-size: 12px;\n}\n.login .form-buttons {\n  padding: 10px 0;\n}\n.login .login-form {\n  padding: 37px 25px 0;\n}\n.login .mint-cell-wrapper {\n  padding: 0;\n  font-size: 17px;\n}\n.login .form-buttons {\n  margin-top: 37px;\n}\n.login .note-line {\n  color: #666;\n  font-size: 14px;\n  padding: 20px 0;\n}\n.login .logo {\n  background: white;\n  text-align: center;\n  padding: 10px;\n}\n.login .logo img {\n    max-width: 50%;\n    max-width: 30vh;\n}\n.login .logo small {\n    display: block;\n}\n"],sourceRoot:""}])},QEuU:function(n,e,t){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",{staticClass:"login"},[t("form",{staticClass:"login-form",on:{submit:function(e){e.preventDefault(),n.submit()}}},[t("div",{staticClass:"fields"},[t("fb-field",{attrs:{type:"number",label:"手机号",placeholder:"请输入您的手机号",state:n.getFieldState("user.phone")},nativeOn:{click:function(e){n.showFieldError(e,"user.phone")}},model:{value:n.user.phone,callback:function(e){n.user.phone=e},expression:"user.phone"}},[t("span",{slot:"label"},[t("i",{staticClass:"iconfont icon-user-solid2"})])]),t("fb-field",{attrs:{type:"number",label:"手机号",placeholder:"请输入验证码",state:n.getFieldState("user.captcha")},nativeOn:{click:function(e){n.showFieldError(e,"user.captcha")}},model:{value:n.user.captcha,callback:function(e){n.user.captcha=e},expression:"user.captcha"}},[t("span",{slot:"label"},[t("i",{staticClass:"iconfont icon-verification"})]),t("mt-button",{attrs:{type:"default",disabled:n.countdownVisible},on:{click:function(e){e.stopPropagation(),e.preventDefault(),n.toGetMsgCode()}}},[t("span",{directives:[{name:"show",rawName:"v-show",value:!n.countdownVisible,expression:"!countdownVisible"}]},[n._v("获取验证码")]),t("fb-countdown",{directives:[{name:"show",rawName:"v-show",value:n.countdownVisible,expression:"countdownVisible"}],ref:"fnCountdown",on:{"countdown-over":function(e){n.onCountdownOver()}}})],1)],1)],1),t("div",{staticClass:"form-buttons"},[t("mt-button",{staticClass:"mint-button-block",attrs:{type:"primary",size:"large"}},[n._v("立即登录")]),t("div",{staticClass:"note-line"},[t("fb-checkbox",{attrs:{value:!1,state:n.getFieldState("agreement")},model:{value:n.agreement,callback:function(e){n.agreement=e},expression:"agreement"}},[t("span",{staticClass:"pl10"},[n._v("我已阅读并同意")]),t("router-link",{attrs:{to:{name:"registerAgreement"}}},[n._v("《注册与服务合同》")])],1)],1)],1)])])},staticRenderFns:[]},n.exports.render._withStripped=!0},nWjG:function(n,e,t){"use strict";var o=t("IXCS"),i=t.n(o),a=i.a.Validator;e.a={methods:{Validator:a,validate:a.value,getFieldState:function(n){return this.validation.hasError(n)?"error":this.validation.isPassed(n)?"success":""},showFieldError:function(n,e){var t=n.target;t.classList.contains("mintui-field-error")&&t.parentNode.classList.contains("mint-field-state")&&this.$toast(this.validation.firstError(e),"error")}}}},"zx+b":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("Dd8w"),i=t.n(o),a=t("Xxa5"),r=t.n(a),s=t("exGp"),c=t.n(s),l=t("nWjG"),u=t("4JGu"),d=t("oiih"),p=t("NYxO"),g=t("VuIw"),A=t("IcnI");e.default={mixins:[u.b,l.a],validators:{agreement:function(n){var e=this;return this.validate(n).custom(function(){if(!e.agreement)return"请阅读并同意《注册与服务合同》"})},"user.phone":function(n){return this.validate(n).required("请输入手机号").digit("请正确输入手机号").regex("^1[3-9]\\d{9}$","请正确输入手机号")},"user.captcha":function(n){return this.validate(n).required("请输入验证码").digit("请正确输入验证码").length(6,"请正确输入验证码")}},beforeRouteEnter:function(n,e,t){var o=this;return c()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.query.accesstoken){e.next=8;break}return n.query.accesstoken,A.a.dispatch("updateToken",n.query.accesstoken),e.next=5,A.a.dispatch("getUser");case 5:t({name:n.query.to||"authorizedTip"}),e.next=9;break;case 8:t();case 9:case"end":return e.stop()}},e,o)}))()},mounted:function(){this.redirect=decodeURIComponent(this.$route.query.redirect||""),this.user.phone=this.$store.getters.user.phone||t.i(g.a)(d.e)||""},methods:i()({},t.i(p.a)(["login","getUser","updateToken"]),{submit:function(){var n=this;return c()(r.a.mark(function e(){var t,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$validate();case 2:if(!(t=e.sent)){e.next=10;break}return e.next=6,n.login(n.user);case 6:o=e.sent,o.code===d.a.OK&&n.$router.push({path:n.redirect||"/"}),e.next=11;break;case 10:n.$toast(n.validation.firstError(),"error");case 11:case"end":return e.stop()}},e,n)}))()}}),data:function(){return{redirect:null,agreement:!0,user:{phone:"",captcha:""}}}}}});